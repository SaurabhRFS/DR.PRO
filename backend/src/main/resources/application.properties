# ==========================================
#       DR. PRO - PRODUCTION CONFIG
# ==========================================
spring.application.name=backend
server.port=8080
# Listen on all network interfaces (Required for Mobile Access)
server.address=0.0.0.0

# --- 1. DATABASE CONFIGURATION ---
spring.datasource.url=jdbc:mysql://localhost:3306/drpro_db?useSSL=false&serverTimezone=UTC&allowPublicKeyRetrieval=true
spring.datasource.username=root
spring.datasource.password=root
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# --- 2. JPA / HIBERNATE SETTINGS ---
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect

# --- 3. FILE UPLOAD & STORAGE ---
# Cap file uploads to 40MB
spring.servlet.multipart.max-file-size=40MB
spring.servlet.multipart.max-request-size=40MB

# Store Uploads in User's Home Folder (Works on Mac AND Windows)
file.upload-dir=${user.home}/DrPro_Data/uploads
spring.jackson.serialization.write-dates-as-timestamps=false

# --- 4. AUTOMATED BACKUP CONFIG ---
# Store Backups in User's Home Folder
backup.dir=${user.home}/DrPro_Data/backups

# Schedule: Runs every day at 11:00 PM
backup.schedule=0 0 23 * * *

# NOTE: 'backup.mysqldump-path' is removed here.
# It is now injected automatically by your Start Script!

# --- 5. PERFORMANCE TUNING (Anti-Sleep) ---
spring.datasource.hikari.keepalive-time=30000
spring.datasource.hikari.max-lifetime=600000
spring.datasource.hikari.connection-test-query=SELECT 1

# --- 6. LEGACY CLOUDINARY (Doctor Profile Only) ---
cloudinary.cloud-name=dedr1icja
cloudinary.api-key=268617287957321
cloudinary.api-secret=dK65DJ3wNLO0ikjr4kbFX0cdiyk

# --- 7. SECURITY ---
jwt.secret=7d8a9c0d1e2f3a4b5c6d7e8f9a0b1c2d3e4f5a6b7c8d9e0f1a2b3c4d5e6f7a8b

# --- 8. LOGGING (Silent Mode) ---
logging.level.root=ERROR
logging.level.org.springframework.boot=ERROR
logging.level.org.hibernate=ERROR
logging.level.org.hibernate.stat=OFF
logging.level.org.hibernate.SQL=OFF
spring.main.banner-mode=console




# ==========================================
# ==========================================
# ==========================================
# ==========================================

# FOR MAC AND LINUX USERS ONLY

# ==========================================
# ==========================================
# ==========================================
# ==========================================





# spring.application.name=backend

# # Database Configuration
# spring.datasource.url=jdbc:mysql://localhost:3306/drpro_db?useSSL=false&serverTimezone=UTC&allowPublicKeyRetrieval=true
# spring.datasource.username=root
# spring.datasource.password=root
# spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# # JPA / Hibernate Settings
# spring.jpa.hibernate.ddl-auto=update
# spring.jpa.show-sql=false
# spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect

# # --- NEW Cloudinary Configuration ---
# # Extracted from: cloudinary://268617287957321:dK65DJ3wNLO0ikjr4kbFX0cdiyk@dedr1icja
# cloudinary.cloud-name=dedr1icja
# cloudinary.api-key=268617287957321
# cloudinary.api-secret=dK65DJ3wNLO0ikjr4kbFX0cdiyk

# # --- JWT Secret ---
# jwt.secret=7d8a9c0d1e2f3a4b5c6d7e8f9a0b1c2d3e4f5a6b7c8d9e0f1a2b3c4d5e6f7a8b

# # --- File Upload Limits (Important for Photos) ---
# # Cap file uploads to 10MB to prevent crashes
# spring.servlet.multipart.max-file-size=40MB
# spring.servlet.multipart.max-request-size=40MB

# # Fix Date Serialization
# spring.jackson.serialization.write-dates-as-timestamps=false


# # Force Server to listen on ALL network interfaces (not just localhost)
# server.address=0.0.0.0
# server.port=8080

# # --- AUTOMATED BACKUP CONFIG ---
# # PASTE YOUR PATH FROM STEP 1 BELOW:
# backup.mysqldump-path=/opt/homebrew/bin/mysqldump

# # Schedule: Runs every day at 11:00 PM
# backup.schedule=0 0 23 * * *


# # --- PERFORMANCE TUNING (Fixing the 20s delay) ---
# # Check if connection is alive every 30 seconds
# spring.datasource.hikari.keepalive-time=30000
# # Maximum time a connection sits in the pool (10 minutes)
# spring.datasource.hikari.max-lifetime=600000
# # Test the connection before giving it to the app
# spring.datasource.hikari.connection-test-query=SELECT 1


# # --- LOGGING CONFIG ---
# # Only show ERRORS (Hide INFO, DEBUG, WARN)

# # Ensure the Banner still shows
# spring.main.banner-mode=console

# # --- LOGGING CONFIG ---
# logging.level.root=ERROR
# logging.level.org.springframework.boot=ERROR
# logging.level.org.hibernate=ERROR
# logging.level.org.hibernate.stat=OFF
# logging.level.org.hibernate.SQL=OFF